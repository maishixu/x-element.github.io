import{d as A,p as i,q as D,h as V,L as O,c as n,o,n as R,ag as C,F as S,e as t,j as g,r as d,aj as T,K as B,b as P,Z as U,ak as q,P as x}from"./framework.B29QjDBT.js";import{_ as F}from"./Icon.vue_vue_type_script_setup_true_lang.G8GivyLZ.js";const E=Symbol("formItemContextKey"),L={key:0,class:"mx-input__prepend"},Z={class:"mx-input__wrapper"},G={key:0,class:"mx-input__prefix"},H=["type","disabled","placeholder","readonly","autofocus","autocomplete","form"],J={key:1,class:"mx-input__append"},Q=["disabled","placeholder","readonly","autofocus","autocomplete","form"],Y=A({name:"MxInput",inheritAttrs:!1,__name:"Input",props:{modelValue:{},type:{default:"text"},size:{},disabled:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},placeholder:{},readonly:{type:Boolean},autocomplete:{},autofocus:{type:Boolean},form:{}},emits:["update:modelValue","input","change","blur","focus","clear"],setup(I,{expose:M,emit:z}){const l=I,s=z,c=i(),a=i(l.modelValue);D(()=>l.modelValue,()=>{a.value=l.modelValue});const u=i(!1),v=V(()=>l.clearable&&!l.disabled&&!!a.value&&u.value),j=()=>{a.value="",s("update:modelValue",a.value),s("clear"),s("input",a.value),s("change",a.value)},h=e=>{u.value=!0,s("focus",e)},m=O(E,null),f=async e=>{try{await(m==null?void 0:m.validate(e))}catch{}},w=()=>{s("update:modelValue",a.value),s("input",a.value),f("input")},b=e=>{u.value=!1,s("blur",e),f("blur")},r=i(!1),k=V(()=>l.showPassword&&!l.disabled&&!!a.value),K=()=>{r.value=!r.value},$=()=>{f("change"),s("change",a.value)},N=async()=>{await x(),c.value.focus()},_=()=>{};return M({ref:c}),(e,p)=>(o(),n("div",{class:R(["mx-input",{[`mx-input--${e.type}`]:e.type,[`mx-input--${e.size}`]:e.size,"is-disabled":e.disabled,"is-prepend":e.$slots.prepend,"is-append":e.$slots.append,"is-prefix":e.$slots.prefix,"is-suffix":e.$slots.suffix,"is-focus":u.value}])},[e.type!=="textarea"?(o(),n(S,{key:0},[e.$slots.prepend?(o(),n("div",L,[d(e.$slots,"prepend")])):t("",!0),g("div",Z,[e.$slots.prefix?(o(),n("span",G,[d(e.$slots,"prefix")])):t("",!0),C(g("input",B({class:"mx-input__inner",type:e.showPassword?r.value?"text":"password":e.type,disabled:e.disabled,placeholder:e.placeholder,readonly:e.readonly,autofocus:e.autofocus,autocomplete:e.autocomplete,form:e.form},e.$attrs,{"onUpdate:modelValue":p[0]||(p[0]=y=>a.value=y),ref_key:"inputRef",ref:c,onInput:w,onFocus:h,onBlur:b,onChange:$}),null,16,H),[[T,a.value]]),e.$slots.suffix||v.value||k.value?(o(),n("span",{key:1,class:"mx-input__suffix",onClick:N},[d(e.$slots,"suffix"),v.value?(o(),P(F,{key:0,icon:"circle-xmark",class:"mx-input__clear",onClick:j,onMousedown:U(_,["prevent"])})):t("",!0),k.value?(o(),P(F,{key:1,icon:r.value?"eye":"eye-slash",class:"mx-input__password",onClick:K},null,8,["icon"])):t("",!0)])):t("",!0)]),e.$slots.append?(o(),n("div",J,[d(e.$slots,"append")])):t("",!0)],64)):C((o(),n("textarea",B({key:1,class:"mx-textarea__wrapper",disabled:e.disabled,placeholder:e.placeholder,readonly:e.readonly,autofocus:e.autofocus,autocomplete:e.autocomplete,form:e.form},e.$attrs,{"onUpdate:modelValue":p[1]||(p[1]=y=>a.value=y),onInput:w,onClick:h,onBlur:b,onChange:$}),null,16,Q)),[[q,a.value]])],2))}});export{Y as _};
